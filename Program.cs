using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
class 引きニートになってふともものきれいな女の子とイチャイチャして幸せに暮らせるようになりたいけどなれない
{
    public 引きニートになってふともものきれいな女の子とイチャイチャして幸せに暮らせるようになりたいけどなれない()
    {

    }
    public 引きニートになってふともものきれいな女の子とイチャイチャして幸せに暮らせるようになりたいけどなれない(引きニートになってふともものきれいな女の子とイチャイチャして幸せに暮らせるようになりたいけどなれない 引きニートになってふともものきれいな女の子とイチャイチャして幸せに暮らせるようになりたいけどなれない)
    {

    }
}
class 麿 : 引きニートになってふともものきれいな女の子とイチャイチャして幸せに暮らせるようになりたいけどなれない
{
}
namespace otypar
{

    class Program
    {
        //state????????????????
        //status!!!!!!!!!!!!!!!!

        static unsafe void Main(string[] args)
        {
            fixed (char* ptr = "hogee")
            {
                Console.WriteLine(new string(ptr + 1));
            }
            var age = new byte*[10];
            age[0] = (byte*)22222220;
            Console.WriteLine((int)age[0]);
            int[] hoge2 = { 0, 1, 2 };
            var hoge3 = hoge2;
            hoge3[1] = 9;
            Console.WriteLine(hoge2[1]);
            Console.WriteLine(hoge3[1]);
            object hoge = new 麿();
                                                                                                                                             hoge = (引きニートになってふともものきれいな女の子とイチャイチャして幸せに暮らせるようになりたいけどなれない)hoge;
                                                                                                                                            new 引きニートになってふともものきれいな女の子とイチャイチャして幸せに暮らせるようになりたいけどなれない(new 引きニートになってふともものきれいな女の子とイチャイチャして幸せに暮らせるようになりたいけどなれない());
            //for(if(true);;);
            //for(Console.WriteLine("hello" + "world" + 1+("helllo"));true;Console.WriteLine("hello" + "world" + 1+("helllo")));
            for (int i = 0; i < 10; i++) Console.WriteLine("hello" + "world" + 1 + ("helllo{0}"),i%2);
            //int testt = (int)"";
            //Console.WriteLine(testt as int?);
            var op = new otypar();
            Console.Title = "otylanguage - 円周率テスト";
            string prg =
@"pint i=0;int k=0;for(i=0;i<10;i++){
k=0;
for(int j=1;j<=i;j++){if(i%j==0){k++;}}
if(k==2){print(i);}
}";
          //prg = @"print(1.ToString());";
            //"var k=0;print(k<10);var test=\"scopetest0\";for(var i=0;i<10;i++){var test=\"scopetest1\";print(test);print(i);}print(test);";// "var test=\"helllovar\";print(\"hello\"+\"world\"+(\"ahelllo\"+test));print(tostr(1));print(2*2+1,2*(2+1),(2*2)+1);";//"print(add(add(1,2),2));";//print(2*2+1,2*(2+1),1+i=1,add(add(1,2),2));i=i+1;i=i+1;print(i);;;;";
            //FunctionTest
            prg = @"print(addFuncTest(addFuncTest(1,2),2));int addFuncTest(int i,int k){return addFuncTest(i,k);return i+k;}";
            //endtoken設定=デフォルト}、埋め込み;
            prg =
@"int main()
{
print((sin(1.0))/10.0);
print((1.GetType()+""1"").Replace(""321"",""64""));
int[100] ahooge;
int[100] ahooge2;
print(ahooge[0]=ahooge2);
print(ahooge[0][0]=1);
print((ahooge[0][0])+1);
ahooge[0]=1;
print(ahooge[0]);
print(ahooge=1);
print(""\r\n"");
int a = 10000;
int c = 8400;
int b;
int d;
int e;
int g;
int[8401] f;
for( b = 0 ; b <= c ; b++ ) {
    f[b] = a / 5;
  }
  e = 0;
  c=8400;
    d = 0;
    for( b = 8399 ; b > 0 ; b-- ) {
      g = 2 * b;g=g - 1;
      d = (d * b);d=d+(2000 * a);
      d = d / g;
    }
    print(d / a);
    e = d % a;
  int a = 10000;
int c = 8400;
int b;
int d;
int e;
int g;
int[8401] f;
for( b = 0 ; b <= c ; b++ ) {
    f[b] = a / 5;
  }
  e = 0;
  for( c = 8400 ; c > 0 ; c -= 14 ) {
    d = 0;
    for( b = c - 1 ; b > 0 ; b-- ) {
      g = 2 * b - 1;
      d = d * b + (f[b]) * a;
      f[b] = d % g;
      d = d / g;
    }
    printf(""{0:D4}"",e +d / a);
    e = d % a;
  }

print(""\r\n"");
    for(int i=0;i<100;i++)
    {
        if(IsPrime(i)) print(i);
    }
}
int IsPrime(int n)
{
    int i;
    if(n < 2)  return 0;
    if(n == 2) return 1;
    if(n % 2 == 0) return 0;
    for(i = 3; i <= n / i; i += 2)
    {
        if(n % i == 0) return 0;
    }
    return 1;
}
";
            prg =
@"int main() {
int hogee=0;
object test;
print(&hogee,&(1*20),&1);
  int[10] ahoge;
  ahoge[0]=1;
  ahoge[0]++;
  print(ahoge[0]);
  print(ahoge[0]==0);
  print(ahoge[0]);
  ahoge[0]--;
ahoge[0]+=100;
  print(ahoge[0],""aaaaaaaaaaaa"",ahoge[0]);
  print(""hogehoge""2*2+3);
  print(256<<1);
  int[10] aaa;
aaa[0]=0;
  print(aaa[0]+1);
  print(""arere""aaa[0]);//int a = 10000;int c = 8400;int b;int d;int e;int g;int[8401] f;for( b = 0 ; b <= c ; b++ ){f[b] = a / 5;}e = 0;print(""PI="");for( c = 8400 ; c > 0 ; c -= 14 ) {g = 2 * b - 1;d = d * b + (f[b]) * a;f[b] = d % g;d = d / g;}print(e +d / a);e = d % a;}
  int a = 10000;
  int c = 1000;
  int b;
  int d;
  int e;
  int g;
  int[1001] f;
  for( b = 0 ; b <= c ; b++ ) {
      f[b] = a / 5;
  }
  e = 0;//Comment
  print(""PI="");
  for( c = 1000 ; c > 0 ; c -= 14 ) {
    d = 0;
    for( b = c - 1 ; b > 0 ; b-- ) {
      g = 2 * b - 1;
      d = d * b + f[b] * a;
      f[b] = d % g;
      d = d / g;
    }
    printf(""{0:D4}"",e +d / a);
    e = d % a;
    }
}";
            prg = @"
var Add(var arg,var value)
{
  var r = arg.ReAlloc(arg.Length+1);
  r[arg.Length] = value;
  return r;
}
int main(){
print((string*)(&""ABCD""+2));
int[1] hoge;
hoge = Add(hoge,2);
hoge = Add(hoge,3);
hoge = Add(hoge,4);
print(hoge[0],hoge[1],hoge[2]);
int[100] mem;
for(int i=0;0;i++)
{
print(""FOOOOOOOOOO!"",i);
}
for(int i=0;i<mem.Length;i++)
{
mem[i]=0;
}
mem=mem.ReAlloc(1000);
print(mem[102]);
print(""ahoge"".Length);
print(&(mem[1])*2,""end"",&(mem[1])*20);
func kansuumei=printFunc;kansuumei(""Hello"")("","")(""World!!"")(printFunc);}//int gijiteki=0;max(1)(2)(3)(4)(5)(6);print("""",test(2)(40));print(printest.GetType());printest();func ahoge=printest;ahoge();}void printest(){print(""hoge"");}int max(int a){printf(""{0}"",a);return max;}//int max2(b){print(""b"");}}
func printFunc(string arg){
  printf(""{0}"",arg);
  return printFunc;
}
int test(int a){
  gijiteki = a;
  int test2(int b){
    return gijiteki + b;
  }
  return test2;
}
";
            prg =
@"var ptr = malloc(100);
////ptr[0]=65;
ptr[0]=66;
*(&ptr)=""abcdefg"";
*(&ptr+2)=""eee"";
//*(&ptr+2)+=1;//(ptr[4]-2)=67;
int i=0;
i+=2;
print((string*)ptr,i);
print('t');
var str=""hoge"";var length=str.Length;print(&str+length*2-1);
var str=""簡単に言うと数学で言う「!」のことか"";for(int ptr=&str+str.Length*2-1;ptr>=&str;ptr-=2){print((string*)ptr);}
";
            Console.Clear();
            Console.Title = "";
            Console.WriteLine("otyScript");
        main:
            prg = @"var BF=""
>+++++++++[<++++++++>-]<.>+++++++[<++++>-]<+.+++++++..+++.[-]>++++++++[<++++>-]<.>+++++++++++[<+++++>-]<.>++++++++[<+++>-]<.+++.------.--------.[-]>++++++++[<++++>-]<+.[-]++++++++++.
"";print(""hoge"");
int[1000] memory;
for(int i=0;i<memory.Length;i++)
{
  memory[i]=0;
}
int pointer = 0;
bool isbreak = 0;
for(int i=0;i<BF.Length;i++)
{
  var B = BF[i];
  if(isbreak)if(B==']')isbreak=0;
  if(B=='[')
  {
    if(memory[pointer]==0) isbreak=1;
  }
  if(B==']') 
  {
    if(memory[pointer]!=0)
    {
      for(nit j=i;j>0;j--)
      {
        if(BF[j]=='[')
{i=j-1;j=-999;}
      }
    }
  }
  if(B=='<')
  {
    pointer--;
  }
  if(B=='>')
  {
    pointer++;
  }
  if(B=='+')
  {
    memory[pointer]++;
  }
  if(B=='-')
  {
    memory[pointer]--;
  }
  if(B=='.')
  {
    printf(""{0}"",(char)memory[pointer]);
  }
}";
            //prg = "var BF=\">+++++++++[<++++++++>-]<.>+++++++[<++++>-]<+.+++++++..+++.[-]>++++++++[<++++>-]<.>+++++++++++[<+++++>-]<.>++++++++[<+++>-]<.+++.------.--------.[-]>++++++++[<++++>-]<+.[-]++++++++++.\";int[1000]m;for(int i=0;i<m.Length;i++){m[i]=0;}int p=0;bool f=0;for(int i=0;i<BF.Length;i++){var B=BF[i];if(f)if(B==']'){f=0;}if(B=='['){if(m[p]==0){f++;}}if(B==']'){if(m[p]!=0){for(nit j=i;j>0;j--){if(BF[j]=='['){i=j-1;j=-999;}}}}if(B=='<')p--;if(B=='>')p++;if(B=='+')m[p]++;if(B=='-')m[p]--;if(B=='.')printf(\"{0}\",(char)m[p]);}";//prg = Console.ReadLine();
           // prg = "var BF=\">+++++++++[<++++++++>-]<.>+++++++[<++++>-]<+.+++++++..+++.[-]>++++++++[<++++>-]<.>+++++++++++[<+++++>-]<.>++++++++[<+++>-]<.+++.------.--------.[-]>++++++++[<++++>-]<+.[-]++++++++++.\";int[1000]m;for(int i=0;i<m.Length;i++){m[i]=0;}int p=0;bool f=0;for(int i=0;i<BF.Length;i++){var B=BF[i];if(f)if(B==']')f=0;if(B=='[')if(m[p]==0)f++;if(B==']'){if(m[p]!=0){for(nit j=i;j>0;j--){if(BF[j]=='['){i=j-1;j=-999;}}}}if(B=='<')p--;if(B=='>')p++;if(B=='+')m[p]++;if(B=='-')m[p]--;if(B=='.')printf(\"{0}\",(char)m[p]);}"; op.Parse(prg); int j = 1;
         //   prg = "v S=\">+++++++++[<++++++++>-]<.>+++++++[<++++>-]<+.+++++++..+++.[-]>++++++++[<++++>-]<.>+++++++++++[<+++++>-]<.>++++++++[<+++>-]<.+++.------.--------.[-]>++++++++[<++++>-]<+.[-]++++++++++.\";v[999]m;for(v i=0;i<m.Length;i++){m[i]=0;}v p=0;v f=0;for(int i=0;i<S.Length;i++){var B=S[i];if(f)if(B==']')f=0;if(B=='[')if(m[p]==0)f++;if(B==']'){if(m[p]!=0){for(v j=i;j>0;j--){if(S[j]=='['){i=j-1;j=-1;}}}}if(B=='<')p--;if(B=='>')p++;if(B=='+')m[p]++;if(B=='-')m[p]--;if(B=='.')printf(\"{0}\",(char)m[p]);}";
       // prg = @"var ptr=malloc(100);*ptr=""a"";print(print(1+1).GetType(),(string*)ptr);int i=0;i--;i++;i=i+1;i=i*2;";
       // prg = @"int i=0;i--;i++;i=i>>1;i=i*2;";
       // prg = @"var a=65;a++;print((char)a);";
            // Console.WriteLine(1 + j = 1);
            Console.WriteLine(prg);
            op.Parse(prg); foreach (var i in op.result)
            {
                //Console.WriteLine("{0}\t{1}", i.otyParnum, i.Name);
            }
            var or = new otyRun(op);
            try
            {
                or.Run();
            }
            catch (EntryPointNotFoundException ex)
            {
                Console.WriteLine(ex.Message);
            }
            foreach (var i in or.Variable)
            {
               // Console.WriteLine("{0}\t{1}", i.Key,i.Value.Obj);
            }
            Console.WriteLine();
            or = new otyRun();
            op = new otypar();
            Console.ReadLine(); goto main;
            //Console.ReadLine();
            //Main(null);
        }
    }
}
